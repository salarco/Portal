var LayoutEditor;(function(n){Array.prototype.move=function(n,t){this.splice(t,0,this.splice(n,1)[0])};n.childrenFrom=function(t){return _(t).map(function(t){return n.elementFrom(t)})};n.elementFrom=function(t){switch(t.type){case"Grid":return n.Grid.from(t);case"Row":return n.Row.from(t);case"Column":return n.Column.from(t);case"Content":return n.Content.from(t);default:throw new Error('No element with type "'+t.type+'" was found.');}};n.setModel=function(n,t){$(n).scope().element=t};n.getModel=function(n){return $(n).scope().element}})(LayoutEditor||(LayoutEditor={})),function(n){n.Element=function(n,t,i,r,u){if(!n)throw new Error("Parameter 'type' is required.");this.type=n;this.data=t;this.htmlId=i;this.htmlClass=r;this.htmlStyle=u;this.canvas=null;this.parent=null;this.isDropTarget=null;this.setCanvas=function(n){this.canvas=n;!!this.children&&_.isArray(this.children)&&_(this.children).each(function(t){t.setCanvas(n)})};this.getIsActive=function(){return this.canvas?this.canvas.activeElement===this&&!this.getIsFocused():!1};this.setIsActive=function(n){this.canvas&&(this.canvas.isDragging||(this.canvas.activeElement=n?this:this.parent))};this.getIsFocused=function(){return this.canvas?this.canvas.focusedElement===this:!1};this.setIsFocused=function(){this.canvas&&(this.canvas.focusedElement=this)};this.getIsSelected=function(){return this.getIsFocused()?!0:!!this.children&&_.isArray(this.children)?_(this.children).any(function(n){return n.getIsSelected()}):!1};this.delete=function(){!this.parent||this.parent.deleteChild(this)};this.moveUp=function(){!this.parent||this.parent.moveChildUp(this)};this.moveDown=function(){!this.parent||this.parent.moveChildDown(this)};this.canMoveUp=function(){return this.parent?this.parent.canMoveChildUp(this):!1};this.canMoveDown=function(){return this.parent?this.parent.canMoveChildDown(this):!1};this.elementToObject=function(){return{type:this.type,data:this.data,htmlId:this.htmlId,htmlClass:this.htmlClass,htmlStyle:this.htmlStyle}};this.copyToClipboard=function(){this.canvas.clipboard=this};this.pasteFromClipboard=function(){!this.parent||this.parent.pasteChildFromClipboard()}}}(LayoutEditor||(LayoutEditor={})),function(n){n.Container=function(t,i){this.allowedChildTypes=t;this.children=i;this.isContainer=!0;var r=this;_(this.children).each(function(n){n.parent=r});this.addChild=function(n){!_(this.children).contains(n)&&_(t).contains(n.type)&&this.children.push(n);n.setCanvas(this.canvas);n.parent=this};this.deleteChild=function(n){var t=_(this.children).indexOf(n);t>=0&&(this.children.splice(t,1),n.getIsActive()&&(this.canvas.activeElement=null),n.getIsFocused()&&this.setIsFocused())};this.insertChild=function(n,t){if(!_(this.children).contains(n)){var i=Math.max(_(this.children).indexOf(t),0);this.children.splice(i+1,0,n);n.setCanvas(this.canvas);n.parent=this}};this.moveChildUp=function(n){if(this.canMoveChildUp(n)){var t=_(this.children).indexOf(n);this.children.move(t,t-1)}};this.moveChildDown=function(n){if(this.canMoveChildDown(n)){var t=_(this.children).indexOf(n);this.children.move(t,t+1)}};this.canMoveChildUp=function(n){var t=_(this.children).indexOf(n);return t>0};this.canMoveChildDown=function(n){var t=_(this.children).indexOf(n);return t<this.children.length-1};this.childrenToObject=function(){return _(this.children).map(function(n){return n.toObject()})};this.pasteChildFromClipboard=function(){if(!!this.canvas.clipboard){var r=this.canvas.clipboard.toObject(),i=n.elementFrom(r);_(t).contains(i.type)?(this.addChild(i),i.setIsFocused()):!this.parent||this.parent.pasteChildFromClipboard()}}}}(LayoutEditor||(LayoutEditor={})),function(n){n.Canvas=function(t,i,r,u,f,e){function s(){var t=new n.Grid(null,null,null,null,[]);o.addChild(t);t.setIsFocused()}n.Element.call(this,"Canvas",i,r,u,f);n.Container.call(this,["Grid","Content"],e);this.config=t;this.activeElement=null;this.focusedElement=null;this.isDragging=!1;this.inlineEditingIsActive=!1;this.clipboard=null;this.setCanvas(this);var o=this;this.availableAddOperations=[{name:"Grid",invoke:function(){s()}}];this.toObject=function(){var n=this.elementToObject();return n.children=this.childrenToObject(),n}};n.Canvas.from=function(t,i){return new n.Canvas(t,i.data,i.htmlId,i.htmlClass,i.htmlStyle,n.childrenFrom(i.children))}}(LayoutEditor||(LayoutEditor={})),function(n){n.Grid=function(t,i,r,u,f){function e(t){var r=t>0?n.Column.times(t):[],i=new n.Row(null,null,null,null,r);o.addChild(i);i.setIsFocused()}n.Element.call(this,"Grid",t,i,r,u);n.Container.call(this,["Row"],f);var o=this;this.availableAddOperations=[{name:"Empty row",invoke:function(){e(0)}},{name:"1 column (of width 12)",invoke:function(){e(1)}},{name:"2 columns (of width 6)",invoke:function(){e(2)}},{name:"3 columns (of width 4)",invoke:function(){e(3)}},{name:"4 columns (of width 3)",invoke:function(){e(4)}},{name:"6 columns (of width 2)",invoke:function(){e(6)}},{name:"12 columns (of width 1)",invoke:function(){e(12)}}];this.toObject=function(){var n=this.elementToObject();return n.children=this.childrenToObject(),n}};n.Grid.from=function(t){return new n.Grid(t.data,t.htmlId,t.htmlClass,t.htmlStyle,n.childrenFrom(t.children))}}(LayoutEditor||(LayoutEditor={})),function(n){n.Row=function(t,i,r,u,f){function e(){return _(o.children).filter(function(n){return n.type==="Column"}).reduce(function(n,t){return n+t.offset+t.width},0)}n.Element.call(this,"Row",t,i,r,u);n.Container.call(this,["Column"],f);this.canAddColumn=function(){return e()<12};this.addColumn=function(){var t,i;this.canAddColumn()&&(t=e(),t<12&&(i=new n.Column(null,null,null,null,12-t,0,[]),this.addChild(i),i.setIsFocused()))};this.canDecreaseColumnOffset=function(n){var t=_(this.children).indexOf(n);return t>=0?n.offset>0:!1};this.decreaseColumnOffset=function(n){var t,i;this.canDecreaseColumnOffset(n)&&(t=_(this.children).indexOf(n),t>=0&&n.offset>0&&(n.offset--,this.children.length>t+1&&(i=this.children[t+1],i.offset++)))};this.canIncreaseColumnOffset=function(n){var t=_(this.children).indexOf(n),i;return t>=0?n.width>1?!0:this.children.length>t+1?(i=this.children[t+1],i.offset>0):e()<12:!1};this.increaseColumnOffset=function(n){var t,i;this.canIncreaseColumnOffset(n)&&(t=_(this.children).indexOf(n),t>=0&&(this.children.length>t+1?(i=this.children[t+1],i.offset>0?i.offset--:n.width--):e()>=12&&n.width--,n.offset++))};this.toObject=function(){var n=this.elementToObject();return n.children=this.childrenToObject(),n};var o=this};n.Row.from=function(t){return new n.Row(t.data,t.htmlId,t.htmlClass,t.htmlStyle,n.childrenFrom(t.children))}}(LayoutEditor||(LayoutEditor={})),function(n){n.Column=function(t,i,r,u,f,e,o){function h(){var t=new n.Grid(null,null,null,null,[]);s.addChild(t);t.setIsFocused()}n.Element.call(this,"Column",t,i,r,u);n.Container.call(this,["Grid","Content"],o);this.width=f;this.offset=e;this.canSplit=function(){return this.width>1};this.split=function(){if(this.canSplit()){var t=Math.floor(this.width/2),i=new n.Column(null,null,null,null,t,0,[]);this.width=this.width-t;this.parent.insertChild(i,this);i.setIsFocused()}};this.canDecreaseOffset=function(){return this.parent.canDecreaseColumnOffset(this)};this.decreaseOffset=function(){this.parent.decreaseColumnOffset(this)};this.canIncreaseOffset=function(){return this.parent.canIncreaseColumnOffset(this)};this.increaseOffset=function(){this.parent.increaseColumnOffset(this)};var s=this;this.availableAddOperations=[{name:"Grid",invoke:function(){h()}}];this.toObject=function(){var n=this.elementToObject();return n.width=this.width,n.offset=this.offset,n.children=this.childrenToObject(),n}};n.Column.from=function(t){return new n.Column(t.data,t.htmlId,t.htmlClass,t.htmlStyle,t.width,t.offset,n.childrenFrom(t.children))};n.Column.times=function(t){return _.times(t,function(){return new n.Column(null,null,null,null,12/t,0,[])})}}(LayoutEditor||(LayoutEditor={})),function(n){n.Content=function(t,i,r,u,f,e,o,s,h){n.Element.call(this,"Content",t,i,r,u);this.contentType=f;this.contentTypeLabel=e;this.contentTypeClass=o;this.html=s;this.hasEditor=h;this.toObject=function(){return{type:"Content"}};this.toObject=function(){var n=this.elementToObject();return n.contentType=this.contentType,n.contentTypeLabel=this.contentTypeLabel,n.contentTypeClass=this.contentTypeClass,n.html=this.html,n}};n.Content.from=function(t){return new n.Content(t.data,t.htmlId,t.htmlClass,t.htmlStyle,t.contentType,t.contentTypeLabel,t.contentTypeClass,t.html,t.hasEditor)}}(LayoutEditor||(LayoutEditor={}));
//# sourceMappingURL=Models.min.js.map
