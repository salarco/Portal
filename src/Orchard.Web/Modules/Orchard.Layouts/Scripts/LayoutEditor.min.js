angular.module("LayoutEditor",["ngSanitize","ngResource","ui.sortable"]);angular.module("LayoutEditor").factory("baseUrl",function(){return{get:function(){return $("[data-base-url]").data("base-url")}}});angular.module("LayoutEditor").factory("elementConfigurator",function(){return{addElementFunctions:function(n,t){$(t.find(".layout-panel")).click(function(n){n.stopPropagation();console.log("Stopping")})},addContainerFunctions:function(n){n.invokeAddContentElement=function(t){n.$root.addElement(t.id).then(function(t){var i=n.element,r=LayoutEditor.Content.from({contentType:t.element.typeName,contentTypeLabel:t.element.typeLabel,contentTypeClass:t.element.typeClass,data:decodeURIComponent(t.element.data),html:decodeURIComponent(t.element.html.replace(/\+/g,"%20"))});i.addChild(r);n.$apply()})};n.sortableOptions={cursor:"move",delay:150,distance:5};n.getClasses=function(n){var t=["layout-element"];return!n.children||t.push("layout-container"),t.push("layout-"+n.type.toLowerCase()),n.type=="Row"&&t.push("row"),n.type=="Column"&&(t.push("col-xs-"+n.width),t.push("col-xs-offset-"+n.offset)),n.type=="Content"&&t.push(n.contentTypeClass),n.getIsActive()&&t.push("layout-element-active"),n.getIsFocused()&&t.push("layout-element-focused"),n.getIsSelected()&&t.push("layout-element-selected"),t}}}});angular.module("LayoutEditor").directive("orcLayoutCanvas",function(n,t,i){return{restrict:"E",scope:{},controller:function($scope,$element,$attrs){$scope.element=$attrs.model?eval($attrs.model):new LayoutEditor.Canvas(null,null,null,null,null,[]);t.addElementFunctions($scope,$element);t.addContainerFunctions($scope,$element);$scope.sortableOptions.axis="y";$scope.$root.layoutDesignerHost=$element.closest(".layout-designer").data("layout-designer-host");$scope.$root.editElement=function(n,t){var i=$scope.$root.layoutDesignerHost;return i.editElement(n,t)};$scope.$root.addElement=function(n,t){var i=$scope.$root.layoutDesignerHost;return i.addElement(n,t)}},templateUrl:i.get()+"/Templates/orc-layout-canvas.html",replace:!0,link:function(n){$(window).click(function(){n.$apply(function(){n.element.canvas.activeElement=null;n.element.canvas.focusedElement=null})})}}});angular.module("LayoutEditor").directive("orcLayoutChild",function(n){return{restrict:"E",scope:{element:"="},link:function(t,i){var r="<orc-layout-"+t.element.type.toLowerCase()+" element='element' />",u=n(r)(t);$(i).replaceWith(u)}}});angular.module("LayoutEditor").directive("orcLayoutColumn",function(n,t,i){return{restrict:"E",scope:{element:"="},controller:function(n,i){t.addElementFunctions(n,i);t.addContainerFunctions(n,i);n.sortableOptions.axis="y"},templateUrl:i.get()+"/Templates/orc-layout-column.html",replace:!0}});angular.module("LayoutEditor").directive("orcLayoutContent",function(n,t){return{restrict:"E",scope:{element:"="},controller:function(t,i){n.addElementFunctions(t,i);t.edit=function(){t.$root.editElement(t.element.contentType,t.element.data).then(function(n){t.element.data=decodeURIComponent(n.element.data);t.element.html=decodeURIComponent(n.element.html.replace(/\+/g,"%20"));t.$apply()})}},templateUrl:t.get()+"/Templates/orc-layout-content.html",replace:!0}});angular.module("LayoutEditor").directive("orcLayoutGrid",function(n,t,i){return{restrict:"E",scope:{element:"="},controller:function(n,i){t.addElementFunctions(n,i);t.addContainerFunctions(n,i);n.sortableOptions.axis="y"},templateUrl:i.get()+"/Templates/orc-layout-grid.html",replace:!0}});angular.module("LayoutEditor").directive("orcLayoutPopup",function(){return{restrict:"A",link:function(n,t,i){var r=$(t),u=r.closest(".layout-popup-trigger"),f=r.closest(".layout-element");u.click(function(){r.toggle();r.is(":visible")&&r.position({my:i.orcLayoutPopupMy||"left top",at:i.orcLayoutPopupAt||"left bottom+4px",of:u})});r.click(function(n){n.stopPropagation()});f.click(function(){r.hide()})}}});angular.module("LayoutEditor").directive("orcLayoutRow",function(n,t,i){return{restrict:"E",scope:{element:"="},controller:function(n,i){t.addElementFunctions(n,i);t.addContainerFunctions(n,i);n.sortableOptions.axis="x";n.sortableOptions["ui-floating"]=!0},templateUrl:i.get()+"/Templates/orc-layout-row.html",replace:!0}});
/*
//# sourceMappingURL=LayoutEditor.min.js.map
*/